<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
  <title></title>
  <style type="text/css">
    #canvas8 {
      width: 600px;
      height: 600px;
      border;
    }
  </style>
</head>
<body>
<canvas id="canvas8" height="600" width="600" style="border:1px solid #ccc;"></canvas>
<script>
  const canvas = document.getElementById('canvas8');
  if(canvas.getContext){
    const van = canvas.getContext('2d');
    let progress = 0;
    drawProgress();

    function drawProgress() {
      // 清空画布(每次清空画布重新绘制，才能更新)
      van.clearRect(0,0,canvas.width,canvas.height);
      // 首先绘制背景
      drawBg();
      // 开始绘制绿色线段
      van.beginPath();
      van.lineWidth = 12;// 设置线宽
      van.strokeStyle = 'green';// 画笔颜色
      van.lineTo(300,300);
      van.lineTo(300+progress,300);
      van.stroke();
      van.closePath();
      // 开始绘制变动的数字
      progress++;
      if(progress <= 200){
        // 通过setTimeout进行递归调用更新
        setTimeout(()=>{
          drawProgress();
        },20)
      }
    }

    /**
     * 绘制背景灰色线段
     */
    function drawBg(){
      van.beginPath();
      van.lineWidth = 12;
      van.strokeStyle = '#d3d';
      van.moveTo(300,300);
      van.lineTo(500,300);
      van.stroke();
      van.closePath();
    }

  }else{
    alert('不支持');
  }
</script>

</body>
</html>
